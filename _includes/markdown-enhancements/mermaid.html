{%- include snippets/get-sources.html -%}
{%- assign _sources = __return -%}
<script>
  window.Lazyload.js('{{ _sources.mermaid }}', function() {
    // Configure mermaid with better theme and settings
    mermaid.initialize({
      startOnLoad: true,
      theme: 'default',
      themeVariables: {
        primaryColor: '#f9f9f9',
        primaryTextColor: '#333',
        primaryBorderColor: '#ccc',
        lineColor: '#666',
        secondaryColor: '#e9e9e9',
        tertiaryColor: '#f5f5f5',
        background: '#ffffff',
        mainBkg: '#f9f9f9',
        secondBkg: '#e9e9e9',
        tertiaryBkg: '#f5f5f5'
      },
      flowchart: {
        useMaxWidth: true,
        htmlLabels: true
      },
      sequence: {
        useMaxWidth: true,
        wrap: true
      },
      gantt: {
        useMaxWidth: true
      }
    });

    // Initialize mermaid diagrams
    try {
      mermaid.run({
        querySelector: '.language-mermaid'
      });
    } catch (error) {
      console.error('Mermaid initialization error:', error);
    }
  });
</script>
